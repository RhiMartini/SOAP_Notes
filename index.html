<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Subjective Evaluation Form</title>
  <style>
    body {
      max-width: 900px;
      margin: auto;
      font-family: sans-serif;
    }
    h2, h3 {
      background-color: #d4edda;
      border-left: 6px solid #2e7d32;
      padding: 8px 12px;
    }
    h3 {
      color: green;
      border-bottom: 2px solid #2196F3;
      background-color: unset;
      border-left: none;
    }
    .grid-4col, .grid-3col {
      display: grid;
      gap: 10px;
    }
    .grid-4col {
      grid-template-columns: repeat(4, 1fr);
    }
    .grid-3col {
      grid-template-columns: repeat(3, 1fr);
    }
    .detailInput {
      display: none;
    }
  </style>
</head>
<body>
<div style="max-width: 900px; margin: auto; font-family: sans-serif;">

<h2 style="background-color:#d4edda; border-left: 6px solid #2e7d32; padding: 8px 12px;">Initial Evaluation – Subjective Section</h2>


<!-- RX BODY PARTS -->

<label><strong>Rx Body Parts</strong></label><br>

<div id="rxBodyParts" style="columns: 4;"></div><br>


<!-- MASSAGE HISTORY -->

<p>Have they had a professional massage before?

<input type="checkbox" name="hadMassage" value="Yes"> Yes

<input type="checkbox" name="hadMassage" value="No"> No

</p>


<p>Is the client a new client to CMT?

<input type="checkbox" name="newClient" value="Yes"> Yes

<input type="checkbox" name="newClient" value="No"> No

</p>


<!-- INJURY REPORT -->

<h3 style="color: green; border-bottom: 2px solid #2196F3;">INJURY REPORT</h3>

<label>Date injury occurred:</label>

<input type="date" id="injuryDate" style="width: 100%;"><br><br>


<label>Details of how the injury occurred:</label>

<textarea id="injuryDetails" style="width: 100%;"></textarea><br><br>


<label>Other treatments received:</label>

<div id="treatmentList"><input type="text" style="width: 100%; margin-bottom: 5px;"></div>

<button type="button" onclick="addField('treatmentList')">➕ Add Treatment</button><br><br>


<label>Effectiveness of other treatments:</label>

<textarea id="treatmentEffectiveness" style="width: 100%;"></textarea><br><br>


<label>Medications prescribed:</label>

<div id="medList"><input type="text" style="width: 100%; margin-bottom: 5px;"></div>

<button type="button" onclick="addField('medList')">➕ Add Medication</button><br><br>


<!-- PAIN REPORT -->

<h3 style="color: green; border-bottom: 2px solid #2196F3;">PAIN REPORT</h3>

<label><strong>Additional Body Parts Reported with Pain:</strong></label><br>

<select id="additionalPartSelect">

<option value="">-- Select Body Part --</option>

</select>

<select id="additionalSideSelect">

<option value="">--</option>

<option value="R">R</option>

<option value="L">L</option>

<option value="BL">BL</option>

</select>

<button type="button" onclick="addAdditionalPart()">➕ Add</button>

<ul id="additionalPartsList" style="list-style-type: none; padding-left: 0; margin-top: 10px;"></ul><br>


<div id="painReportTable"></div><br>


<!-- SLEEP REPORT -->

<h3 style="color: green; border-bottom: 2px solid #2196F3;">SLEEP REPORT</h3>

<div style="display: flex; gap: 20px;">

<div style="flex: 1;">

<label>Total sleep hours/night:</label>

<select id="sleepHours" style="width: 100%;">

<option value="">--</option>

<option>1 hour</option>

<option>2 hours</option>

<option>3 hours</option>

<option>4 hours</option>

<option>5 hours</option>

<option>6 hours</option>

<option>7 hours</option>

<option>8 hours</option>

<option>9 hours</option>

<option>10+ hours</option>

</select>

</div>

<div style="flex: 1;">

<label>Wake-ups due to pain/night:</label>

<select id="wakeUps" style="width: 100%;">

<option value="">--</option>

<option>1</option>

<option>2</option>

<option>3</option>

<option>4</option>

<option>5</option>

<option>6</option>

<option>7</option>

<option>8</option>

<option>9</option>

<option>10+</option>

</select>

</div>

</div><br>


<div style="display: flex; gap: 20px;">

<div style="flex: 1;">

<label>Sleep position before injury:</label>

<select id="sleepBefore" style="width: 100%;">

<option value="">--</option>

<option>Stomach</option>

<option>Back</option>

<option>Side</option>

</select>

</div>

<div style="flex: 1;">

<label>Sleep position after injury:</label>

<select id="sleepAfter" style="width: 100%;">

<option value="">--</option>

<option>Stomach</option>

<option>Back</option>

<option>Side</option>

</select>

</div>

</div><br>




<!-- MOTIONS AFFECTING DAILY LIVING -->

<h3 style="color: green; border-bottom: 2px solid #2196F3;">MOTIONS AFFECTING DAILY LIVING</h3>

<div id="motionsAffecting" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px;">

<div><label><input type="checkbox" value="Sitting"> Sitting</label> <button type="button" onclick="toggleDetailInput(this)">➕</button><div class="detailInput" style="display: none;"><input type="text" placeholder="Details about Sitting" style="width: 100%;"></div></div>

<div><label><input type="checkbox" value="Standing"> Standing</label> <button type="button" onclick="toggleDetailInput(this)">➕</button><div class="detailInput" style="display: none;"><input type="text" placeholder="Details about Standing" style="width: 100%;"></div></div>

<div><label><input type="checkbox" value="Twisting"> Twisting</label> <button type="button" onclick="toggleDetailInput(this)">➕</button><div class="detailInput" style="display: none;"><input type="text" placeholder="Details about Twisting" style="width: 100%;"></div></div>

<div><label><input type="checkbox" value="Bending"> Bending</label> <button type="button" onclick="toggleDetailInput(this)">➕</button><div class="detailInput" style="display: none;"><input type="text" placeholder="Details about Bending" style="width: 100%;"></div></div>

<div><label><input type="checkbox" value="Crouching"> Crouching</label> <button type="button" onclick="toggleDetailInput(this)">➕</button><div class="detailInput" style="display: none;"><input type="text" placeholder="Details about Crouching" style="width: 100%;"></div></div>

<div><label><input type="checkbox" value="Reaching"> Reaching</label> <button type="button" onclick="toggleDetailInput(this)">➕</button><div class="detailInput" style="display: none;"><input type="text" placeholder="Details about Reaching" style="width: 100%;"></div></div>

<div><label><input type="checkbox" value="Squatting"> Squatting</label> <button type="button" onclick="toggleDetailInput(this)">➕</button><div class="detailInput" style="display: none;"><input type="text" placeholder="Details about Squatting" style="width: 100%;"></div></div>

<div><label><input type="checkbox" value="Climbing"> Climbing</label> <button type="button" onclick="toggleDetailInput(this)">➕</button><div class="detailInput" style="display: none;"><input type="text" placeholder="Details about Climbing" style="width: 100%;"></div></div>


<!-- ADLs AFFECTED BY PAIN -->

<h3 style="color: green; border-bottom: 2px solid #2196F3;">ADLs AFFECTED BY PAIN</h3>

<div id="adlsAffecting" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px;">

<div><label><input type="checkbox" value="Ambulating"> Ambulating</label> <button type="button" onclick="toggleDetailInput(this)">➕</button><div class="detailInput" style="display: none;"><input type="text" placeholder="Details about Ambulating" style="width: 100%;"></div></div>

<div><label><input type="checkbox" value="Eating"> Eating</label> <button type="button" onclick="toggleDetailInput(this)">➕</button><div class="detailInput" style="display: none;"><input type="text" placeholder="Details about Eating" style="width: 100%;"></div></div>

<div><label><input type="checkbox" value="Personal Hygiene"> Personal Hygiene</label> <button type="button" onclick="toggleDetailInput(this)">➕</button><div class="detailInput" style="display: none;"><input type="text" placeholder="Details about Personal Hygiene" style="width: 100%;"></div></div>

<div><label><input type="checkbox" value="Dressing"> Dressing</label> <button type="button" onclick="toggleDetailInput(this)">➕</button><div class="detailInput" style="display: none;"><input type="text" placeholder="Details about Dressing" style="width: 100%;"></div></div>

<div><label><input type="checkbox" value="Housework & Maintenance"> Housework & Maintenance</label> <button type="button" onclick="toggleDetailInput(this)">➕</button><div class="detailInput" style="display: none;"><input type="text" placeholder="Details about Housework and Maintenance" style="width: 100%;"></div></div>

<div><label><input type="checkbox" value="Work"> Work</label> <button type="button" onclick="toggleDetailInput(this)">➕</button><div class="detailInput" style="display: none;"><input type="text" placeholder="Details about Work" style="width: 100%;"></div></div>

<div><label><input type="checkbox" value="Transportation"> Transportation</label> <button type="button" onclick="toggleDetailInput(this)">➕</button><div class="detailInput" style="display: none;"><input type="text" placeholder="Details about Transportation" style="width: 100%;"></div></div>

<div><label><input type="checkbox" value="Shopping & Meal Prep"> Shopping & Meal Prep</label> <button type="button" onclick="toggleDetailInput(this)">➕</button><div class="detailInput" style="display: none;"><input type="text" placeholder="Details about Shopping and Meal Prep" style="width: 100%;"></div></div>

</div><br>


<!-- WORK STATUS -->

<h3 style="color: green; border-bottom: 2px solid #2196F3;">WORK STATUS</h3>

<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">

<div><label><input type="radio" name="workStatus"> Full Time</label></div>

<div><label><input type="radio" name="workStatus"> Part Time</label></div>

<div><label><input type="radio" name="workStatus"> Not Working</label></div>

<div><label><input type="radio" name="workStatus"> Full Time Modified Duty</label></div>

<div><label><input type="radio" name="workStatus"> Part Time Modified Duty</label></div>

</div><br>


<label>Self-care tasks done at home:</label>

<textarea id="selfCare" style="width: 100%;"></textarea><br><br>


<label>Additional reporting:</label>

<textarea id="additionalReporting" style="width: 100%;"></textarea><br><br>

<button onclick="

const text = document.getElementById('clipboardOutput');

let output = '';


const rxChecked = Array.from(document.querySelectorAll('#rxBodyParts input[type=checkbox]:checked')).map(cb => {

const label = cb.nextSibling.textContent.trim();

const side = cb.parentElement.querySelector('select')?.value || '';

return side ? `${side} ${label}` : label;

}).join(', ');


const hadMassage = document.querySelector('input[name=hadMassage]:checked')?.value || '';

const newClient = document.querySelector('input[name=newClient]:checked')?.value || '';

const injuryDate = document.getElementById('injuryDate')?.value;

const injuryDetails = document.getElementById('injuryDetails')?.value;


const treatments = Array.from(document.querySelectorAll('#treatmentList input')).map(el => el.value.trim()).filter(Boolean).join('\\n');

const effectiveness = document.getElementById('treatmentEffectiveness')?.value;

const meds = Array.from(document.querySelectorAll('#medList input')).map(el => el.value.trim()).filter(Boolean).join('\\n');


const pains = Array.from(document.querySelectorAll('#painReportTable select')).map(sel => {

const row = sel.closest('tr');

const part = row?.querySelector('td')?.innerText;

const val = sel.value;

return part && val ? `${part}: ${val}/10` : '';

}).filter(Boolean).join('\\n');


const sleepHours = document.getElementById('sleepHours')?.value;

const wakeUps = document.getElementById('wakeUps')?.value;

const sleepBefore = document.getElementById('sleepBefore')?.value;

const sleepAfter = document.getElementById('sleepAfter')?.value;


const motions = Array.from(document.querySelectorAll('#motionsAffecting input[type=checkbox]:checked')).map(cb => {

const label = cb.value || cb.parentElement.textContent.trim();

const detail = cb.closest('div').querySelector('input[type=text]')?.value;

return detail ? `${label} (${detail})` : label;

}).join(', ');


const adls = Array.from(document.querySelectorAll('#adlsAffecting input[type=checkbox]:checked')).map(cb => {

const label = cb.value || cb.parentElement.textContent.trim();

const detail = cb.closest('div').querySelector('input[type=text]')?.value;

return detail ? `${label} (${detail})` : label;

}).join(', ');


const workStatus = document.querySelector('input[name=workStatus]:checked')?.parentElement.innerText.trim();

const selfCare = document.getElementById('selfCare')?.value;

const additional = document.getElementById('additionalReporting')?.value;


output =

'SUBJECTIVE SECTION\\n\\n' +

'Rx Body Parts: ' + rxChecked + '\\n\\n' +

'Professional Massage Before?: ' + hadMassage + '\\n' +

'New to CMT?: ' + newClient + '\\n\\n' +

'INJURY REPORT\\n' +

'Date: ' + injuryDate + '\\n' +

'Details: ' + injuryDetails + '\\n\\n' +

'Other Treatments:\\n' + treatments + '\\n\\n' +

'Effectiveness:\\n' + effectiveness + '\\n\\n' +

'Medications:\\n' + meds + '\\n\\n' +

'PAIN REPORT:\\n' + pains + '\\n\\n' +

'SLEEP REPORT\\n' +

'Sleep Hours/Night: ' + sleepHours + '\\n' +

'Wake-ups due to Pain: ' + wakeUps + '\\n' +

'Sleep Before Injury: ' + sleepBefore + '\\n' +

'Sleep After Injury: ' + sleepAfter + '\\n\\n' +

'MOTIONS AFFECTING DAILY LIVING:\\n' + motions + '\\n\\n' +

'ADLs AFFECTED BY PAIN:\\n' + adls + '\\n\\n' +

'WORK STATUS:\\n' + workStatus + '\\n\\n' +

'Self-Care at Home:\\n' + selfCare + '\\n\\n' +

'Additional Reporting:\\n' + additional;


text.value = output;

text.select();

document.execCommand('copy');

alert('Subjective Section copied!');

">

📋 Copy Subjective Section

</button>

<textarea id="clipboardOutput" style="position: absolute; left: -9999px;"></textarea>
<script>
const rxParts = [
  "Head", "Cervical", "Thoracic", "Lumbar", "Shoulder", "Upper Extremity", "Elbow", "Wrist", "Hand",
  "Fingers", "Hips", "Lower Extremities", "Knee", "Ankle", "Foot"
];

function buildRxChecklist() {
  const container = document.getElementById("rxBodyParts");
  const select = document.getElementById("additionalPartSelect");

  rxParts.forEach(part => {
    const div = document.createElement("div");
    const id = part.replace(/\s+/g, '').toLowerCase();

    let html = `<input type='checkbox' id='${id}' onchange='updatePainReport()'> ${part}`;

    if (["Shoulder", "Upper Extremity", "Elbow", "Wrist", "Hand", "Fingers", "Hips", "Lower Extremities", "Knee", "Ankle", "Foot"].includes(part)) {
      html += ` <select id='${id}Side' onchange='updatePainReport()'>
        <option value=''>--</option>
        <option value='R'>R</option>
        <option value='L'>L</option>
        <option value='BL'>BL</option>
      </select>`;
    }

    div.innerHTML = html;
    container.appendChild(div);

    const option = document.createElement("option");
    option.value = part;
    option.textContent = part;
    select.appendChild(option);
  });
}

function addField(containerId) {
  const container = document.getElementById(containerId);
  const input = document.createElement('input');
  input.type = 'text';
  input.style = 'width: 100%; margin-bottom: 5px;';
  container.appendChild(input);
}

function addAdditionalPart() {
  const part = document.getElementById("additionalPartSelect").value;
  const side = document.getElementById("additionalSideSelect").value;
  const list = document.getElementById("additionalPartsList");

  if (!part) return;

  const item = document.createElement("li");
  item.textContent = side ? `${side} ${part}` : part;
  list.appendChild(item);

  updatePainReport();
}

function updatePainReport() {
  const painTable = document.getElementById("painReportTable");
  let html = `<table style='width:100%;'><tr><th>Body Part</th><th>Pain Level</th></tr>`;

  rxParts.forEach(part => {
    const id = part.replace(/\s+/g, '').toLowerCase();
    const cb = document.getElementById(id);

    if (cb && cb.checked) {
      const side = document.getElementById(id + 'Side')?.value;
      const label = side ? `${side} ${part}` : part;
      html += `<tr><td>${label}</td><td><select>${[...Array(11).keys()].map(n => `<option>${n}</option>`).join('')}</select> /10</td></tr>`;
    }
  });

  const list = document.getElementById("additionalPartsList").children;
  for (let item of list) {
    html += `<tr><td>${item.textContent}</td><td><select>${[...Array(11).keys()].map(n => `<option>${n}</option>`).join('')}</select> /10</td></tr>`;
  }

  html += `</table>`;
  painTable.innerHTML = html;
}

// ✅ Toggle detail input visibility (fixes the + button)
function toggleDetailInput(button) {
  const detailDiv = button.parentElement.querySelector('.detailInput');
  if (detailDiv) {
    detailDiv.style.display = detailDiv.style.display === 'none' ? 'block' : 'none';
  }
}

buildRxChecklist();
</script>

</body>
</html>
