<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Subjective Evaluation Form</title>
  <style>
    body {
      max-width: 900px;
      margin: auto;
      font-family: sans-serif;
    }
    h2, h3 {
      background-color: #d4edda;
      border-left: 6px solid #2e7d32;
      padding: 8px 12px;
    }
    h3 {
      color: green;
      border-bottom: 2px solid #2196F3;
      background-color: unset;
      border-left: none;
    }
    .grid-4col, .grid-3col {
      display: grid;
      gap: 10px;
    }
    .grid-4col {
      grid-template-columns: repeat(4, 1fr);
    }
    .grid-3col {
      grid-template-columns: repeat(3, 1fr);
    }
    #motionsAffecting > div,
    #adlsAffecting > div {
      display: flex;
      flex-direction: column;
    }
    .detailInput {
      display: none;
      margin-top: 5px;
    }
  </style>
</head>
<body>

<h2>Initial Evaluation â€“ Subjective Section</h2>

<!-- RX BODY PARTS -->
<h3>Rx Body Parts</h3>
<div id="rxBodyParts" class="grid-4col">
  <div><label><input type="checkbox" id="head"> Head</label></div>
  <div><label><input type="checkbox" id="cervical"> Cervical</label></div>
  <div><label><input type="checkbox" id="thoracic"> Thoracic</label></div>
  <div><label><input type="checkbox" id="lumbar"> Lumbar</label></div>
  <div><label><input type="checkbox" id="shoulder"> Shoulder</label>
    <select id="shoulderSide">
      <option value="">--</option>
      <option value="R">R</option>
      <option value="L">L</option>
      <option value="BL">BL</option>
    </select>
  </div>
  <div><label><input type="checkbox" id="upperextremity"> Upper Extremity</label>
    <select id="upperextremitySide">
      <option value="">--</option>
      <option value="R">R</option>
      <option value="L">L</option>
      <option value="BL">BL</option>
    </select>
  </div>
  <div><label><input type="checkbox" id="elbow"> Elbow</label>
    <select id="elbowSide">
      <option value="">--</option>
      <option value="R">R</option>
      <option value="L">L</option>
      <option value="BL">BL</option>
    </select>
  </div>
  <div><label><input type="checkbox" id="wrist"> Wrist</label>
    <select id="wristSide">
      <option value="">--</option>
      <option value="R">R</option>
      <option value="L">L</option>
      <option value="BL">BL</option>
    </select>
  </div>
  <div><label><input type="checkbox" id="hand"> Hand</label>
    <select id="handSide">
      <option value="">--</option>
      <option value="R">R</option>
      <option value="L">L</option>
      <option value="BL">BL</option>
    </select>
  </div>
  <div><label><input type="checkbox" id="fingers"> Fingers</label>
    <select id="fingersSide">
      <option value="">--</option>
      <option value="R">R</option>
      <option value="L">L</option>
      <option value="BL">BL</option>
    </select>
  </div>
  <div><label><input type="checkbox" id="hips"> Hips</label>
    <select id="hipsSide">
      <option value="">--</option>
      <option value="R">R</option>
      <option value="L">L</option>
      <option value="BL">BL</option>
    </select>
  </div>
  <div><label><input type="checkbox" id="lowerextremities"> Lower Extremities</label>
    <select id="lowerextremitiesSide">
      <option value="">--</option>
      <option value="R">R</option>
      <option value="L">L</option>
      <option value="BL">BL</option>
    </select>
  </div>
  <div><label><input type="checkbox" id="knee"> Knee</label>
    <select id="kneeSide">
      <option value="">--</option>
      <option value="R">R</option>
      <option value="L">L</option>
      <option value="BL">BL</option>
    </select>
  </div>
  <div><label><input type="checkbox" id="ankle"> Ankle</label>
    <select id="ankleSide">
      <option value="">--</option>
      <option value="R">R</option>
      <option value="L">L</option>
      <option value="BL">BL</option>
    </select>
  </div>
  <div><label><input type="checkbox" id="foot"> Foot</label>
    <select id="footSide">
      <option value="">--</option>
      <option value="R">R</option>
      <option value="L">L</option>
      <option value="BL">BL</option>
    </select>
  </div>
</div><br>

<!-- MASSAGE HISTORY -->
<h3>Massage & Client History</h3>
<p>
  Have they had a professional massage before?
  <label><input type="checkbox" name="hadMassage" value="Yes"> Yes</label>
  <label><input type="checkbox" name="hadMassage" value="No"> No</label>
</p>
<p>
  Is the client a new client to CMT?
  <label><input type="checkbox" name="newClient" value="Yes"> Yes</label>
  <label><input type="checkbox" name="newClient" value="No"> No</label>
</p>

<!-- INJURY REPORT -->
<h3>INJURY REPORT</h3>
<label>Date injury occurred:</label><br>
<input type="date" id="injuryDate" style="width: 100%;"><br><br>
<label>Details of how the injury occurred:</label><br>
<textarea id="injuryDetails" style="width: 100%;"></textarea><br><br>
<label>Other treatments received:</label>
<div id="treatmentList"><input type="text" style="width: 100%; margin-bottom: 5px;"></div>
<button type="button" onclick="addField('treatmentList')">âž• Add Treatment</button><br><br>
<label>Effectiveness of other treatments:</label><br>
<textarea id="treatmentEffectiveness" style="width: 100%;"></textarea><br><br>
<label>Medications prescribed:</label>
<div id="medList"><input type="text" style="width: 100%; margin-bottom: 5px;"></div>
<button type="button" onclick="addField('medList')">âž• Add Medication</button><br><br>

<!-- PAIN REPORT -->
<h3>PAIN REPORT</h3>
<div id="painReportTable"></div><br>

<!-- MOTIONS AFFECTING DAILY LIVING -->
<h3>MOTIONS AFFECTING DAILY LIVING</h3>
<div id="motionsAffecting" class="grid-4col">
  <div><label><input type="checkbox" value="Sitting"> Sitting</label><button type="button" onclick="toggleDetailInput(this)">âž•</button><div class="detailInput"><input type="text" placeholder="Details about Sitting" style="width: 100%;"></div></div>
  <div><label><input type="checkbox" value="Standing"> Standing</label><button type="button" onclick="toggleDetailInput(this)">âž•</button><div class="detailInput"><input type="text" placeholder="Details about Standing" style="width: 100%;"></div></div>
</div><br>

<!-- ADLs AFFECTED BY PAIN -->
<h3>ADLs AFFECTED BY PAIN</h3>
<div id="adlsAffecting" class="grid-4col">
  <div><label><input type="checkbox" value="Ambulating"> Ambulating</label><button type="button" onclick="toggleDetailInput(this)">âž•</button><div class="detailInput"><input type="text" placeholder="Details about Ambulating" style="width: 100%;"></div></div>
  <div><label><input type="checkbox" value="Eating"> Eating</label><button type="button" onclick="toggleDetailInput(this)">âž•</button><div class="detailInput"><input type="text" placeholder="Details about Eating" style="width: 100%;"></div></div>
</div><br>

<!-- WORK STATUS -->
<h3>WORK STATUS</h3>
<div class="grid-3col">
  <div><label><input type="radio" name="workStatus"> Full Time</label></div>
  <div><label><input type="radio" name="workStatus"> Part Time</label></div>
  <div><label><input type="radio" name="workStatus"> Not Working</label></div>
</div><br>

<label>Self-care tasks done at home:</label><br>
<textarea id="selfCare" style="width: 100%;"></textarea><br><br>
<label>Additional reporting:</label><br>
<textarea id="additionalReporting" style="width: 100%;"></textarea><br><br>

<button onclick="copyToClipboard()">ðŸ“‹ Copy Subjective Section</button>

<script>
function toggleDetailInput(button) {
  const detailDiv = button.nextElementSibling;
  if (detailDiv && detailDiv.classList.contains("detailInput")) {
    detailDiv.style.display = detailDiv.style.display === "none" || detailDiv.style.display === "" ? "block" : "none";
  }
}

function addField(containerId) {
  const container = document.getElementById(containerId);
  const input = document.createElement('input');
  input.type = 'text';
  input.style = 'width: 100%; margin-bottom: 5px;';
  container.appendChild(input);
}

function copyToClipboard() {
  const output = [];

  // Rx Body Parts
  const parts = [
    'head', 'cervical', 'thoracic', 'lumbar', 'shoulder', 'upperextremity', 'elbow', 'wrist', 'hand',
    'fingers', 'hips', 'lowerextremities', 'knee', 'ankle', 'foot'
  ];

  const rxChecked = parts.map(id => {
    const cb = document.getElementById(id);
    const side = document.getElementById(id + 'Side')?.value;
    if (cb?.checked) {
      const label = cb.parentElement.textContent.trim();
      return side ? `- ${side} ${label}` : `- ${label}`;
    }
    return null;
  }).filter(Boolean);

  output.push(`SUBJECTIVE
The patient has an Rx for the following body parts:`);
  output.push(...rxChecked, "");

  // Massage History
  const hadMassage = document.querySelector('input[name=hadMassage][value="Yes"]:checked') ? 'Yes' :
                      document.querySelector('input[name=hadMassage][value="No"]:checked') ? 'No' : 'Not Answered';
  const newClient = document.querySelector('input[name=newClient][value="Yes"]:checked') ? 'Yes' :
                     document.querySelector('input[name=newClient][value="No"]:checked') ? 'No' : 'Not Answered';
  output.push(`Has the client had a professional massage before? ${hadMassage}`);
  output.push(`Is the client new to CMT? ${newClient}
`);

  // Injury Report
  output.push(`INJURY REPORT
`);
  output.push(`Date injury occurred: ${document.getElementById("injuryDate")?.value}`);
  output.push(`
Details of how injury occurred:`);
  output.push(`- ${document.getElementById("injuryDetails")?.value}`);

  const treatments = Array.from(document.querySelectorAll('#treatmentList input')).map(el => el.value.trim()).filter(Boolean);
  if (treatments.length) {
    output.push(`
Other treatments received:`);
    treatments.forEach(t => output.push(`- ${t}`));
  }

  const effectiveness = document.getElementById("treatmentEffectiveness")?.value;
  if (effectiveness) output.push(`
Effectiveness of other treatments:
- ${effectiveness}`);

  const meds = Array.from(document.querySelectorAll('#medList input')).map(el => el.value.trim()).filter(Boolean);
  if (meds.length) output.push(`
Medications prescribed:
- ${meds.join(', ')}`);

  // Pain Report
  output.push(`

PAIN REPORT

Pain reported in:`);
  const painRows = document.querySelectorAll('#painReportTable tr');
  painRows.forEach((tr, i) => {
    if (i === 0) return; // skip header row
    const part = tr.children[0].innerText;
    const level = tr.children[1].querySelector('select')?.value;
    if (part && level) output.push(`- ${part} ${level}/10`);
  });

  // Sleep Report
  output.push(`
SLEEP REPORT`);
  output.push(`- Total sleep per night: ${document.getElementById("sleepHours")?.value}`);
  output.push(`- Total times waking due to pain: ${document.getElementById("wakeUps")?.value}x/night`);
  output.push(`- Sleep position before injury: ${document.getElementById("sleepBefore")?.value}`);
  output.push(`- Sleep position after injury: ${document.getElementById("sleepAfter")?.value}`);

  // Motions
  const motions = Array.from(document.querySelectorAll('#motionsAffecting input[type=checkbox]:checked')).map(cb => {
    const txt = cb.closest('div').querySelector('input[type=text]')?.value;
    return txt ? `${cb.value} (${txt})` : cb.value;
  });
  output.push(`
MOTIONS AFFECTING DAILY LIVING
- ${motions.join(', ')}`);

  // ADLs
  const adls = Array.from(document.querySelectorAll('#adlsAffecting input[type=checkbox]:checked')).map(cb => {
    const txt = cb.closest('div').querySelector('input[type=text]')?.value;
    return txt ? `${cb.value} (${txt})` : cb.value;
  });
  output.push(`
ADLs AFFECTED BY PAIN
- ${adls.join(', ')}`);

  // Work Status
  const workStatus = document.querySelector('input[name=workStatus]:checked')?.parentElement?.innerText.trim();
  if (workStatus) output.push(`
WORK STATUS
- ${workStatus}`);

  // Self-Care and Additional
  const selfCare = document.getElementById('selfCare')?.value;
  if (selfCare) output.push(`

Self care tasks done at home:
- ${selfCare}`);
  const additional = document.getElementById('additionalReporting')?.value;
  if (additional) output.push(`

Additional Reporting:
- ${additional}`);

  // Final copy
  const text = document.createElement('textarea');
  text.style.position = 'absolute';
  text.style.left = '-9999px';
  text.value = output.join("
");
  document.body.appendChild(text);
  text.select();
  document.execCommand('copy');
  document.body.removeChild(text);
  alert('Subjective Section copied to clipboard.');
}
</script>

</body>
</html>
